<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>GVAS</title>
    <link rel="stylesheet" href="style.css">
    <script src="flow.js"></script>
</head>
<body>
    <h1 id="dynamic-title">GVAS</h1>
    <h4 id="dynamic-subtitle"></h4>

    <form onsubmit="event.preventDefault(); submitGVAS();">
        <div id="questions-container"></div>
        <button type="submit">AVANTI</button>
    </form>

    <script>
        const questions = [
            "1. Quanto ti senti vigile?", "2. Quanto ti senti triste?", 
            "3. Quanto ti senti teso?", "4. Quanto sforzo ti costa fare qualcosa?",
            "5. Quanto ti senti felice?", "6. Quanto ti senti stanco?",
            "7. Quanto ti senti calmo?", "8. Quanto ti senti assonnato?"
        ];

        const container = document.getElementById('questions-container');
        
        questions.forEach((q, i) => {
            container.innerHTML += `
            <div class="question-box">
                <p><strong>${q}</strong></p>
                <input type="range" name="q${i+1}" min="0" max="100" step="1">
                <div class="labels"><span>Per niente</span><span>Moltissimo</span></div>
            </div>`;
        });

        function submitGVAS() {
            // Raccogli tutti i valori
            let results = {};
            questions.forEach((q, i) => {
                const name = `q${i+1}`;
                results[name] = document.querySelector(`input[name="${name}"]`).value;
            });

            const stepIndex = localStorage.getItem('stepIndex');
            const key = `risultato_step_${stepIndex}_GVAS`;
            
            const record = {
                valori: results,
                fase: getCurrentLightName(),
                timestamp: new Date().toISOString()
            };

            localStorage.setItem(key, JSON.stringify(record));
            nextStep();
        }
    </script>
</body>
</html>